\section{АЛГОРИТМЫ ПрК ИмФ СХД}

\subsection{ОБЩИЕ СВЕДЕНИЯ}

\subsubsection{Обозначение и наименование программы}
Наименование программы: «Программный комплекс имитации функционирования (ПрК ИмФ) системы хранения данных (СХД)».
\subsubsection{Программное обеспечение, необходимое для функционирования программы}

\subsubsection{Языки программирования, на которых написана программа}
Для реализации Прк ИмФ СХД используется язык программирования Go 1.10.  
\subsection{ФУНКЦИОНАЛЬНОЕ НАЗНАЧЕНИЕ}
ПрК ИмФ СХД должен быть предназначен для имитации функционировании СХД Tatlin (показан на рис. ~\ref{fig:tatlin}) с целью проверки гипотез о состояниях СХД и переходах между ними в течение заданного интервала времени. 

\par 
ПрК ИмФ СХД должен обеспечивать выполнение следующих функций:
\begin{itemize}
	\item ввод параметров имитации;
	\item имитация функционирования аппаратных компонентов СХД с учетом взаимного влияния аппаратных компонентов СХД в режимах: чтения, записи и хранения данных;
	\item имитация функционирования СПО СХД;
	\item имитация функционирования СХД в целом с учетом управляющих воздействий на компоненты СХД в режимах: чтения, записи и хранения данных;
	\item имитация нагрузки на СХД.
\end{itemize}


\begin{figure}[t!]
	\centering
	\includegraphics[width=\textwidth]{Kenenbek/images/tatlin.png}
	\caption{СХД Татлин.}
	\label{fig:tatlin}
\end{figure}


\subsection{ОПИСАНИЕ ЛОГИЧЕСКОЙ СТРУКТУРЫ}

\subsubsection{Алгоритм программы}



\subsubsection{Используемые методы}
\textbf{ОПИСАНИЕ ОКРУЖЕНИЯ ИМИТАЦИИ}
Имитация системы происходит при помощи объекта типа Environment, который полностью отражает текущее положение системы. Данный объект обладает следующими полями:
\begin{itemize}
\item \textit{currentTime} -- текущее время системы типа $float64$. Изменяется дискретными шагами.

\item \textit{workers} -- словарь типа $map[uint64]*Process$, где в качестве ключа выступает идентификатор PID объекта, а в качестве значение указатель $Worker$.

\item \textbf{routesMap} -- словарь типа  $map[Route]*Link$. Содержит значения обо всех путях, возможной в данной конфигурации компьютерной сети. $Route$ -- структура, имеющая в качестве своих полей $start$ и $finish$ -- указатели на хост, которые являются началом и концом пути, соответственно. Значение $*Link$ -- является указателем на сеть, по которой будет проходить передача пакетов в обе стороны.


\item \textit{queue} -- поле типа $eventQueue$. Является глобавльным хранилищем всех событий во время имитации сложных сложных систем.

\item \textit{mutex}         
Поле типа $sync.Mutex$. Примитив синхронизации нужный для того, чтобы обеспечивать консистентность доступа к данным, таким как очередь событий $queue$. 

\item \textit{shouldStop}    
Поле типа $bool$. Во время прогона симуляции является равным 1. После того, как все события в имитации заканчиваются, либо при наличии специального события, выставляется в отрицательное значение и прогон прекращается.

\item \textit{hostsMap}      
Словарь типа $map[string]HostInterface$. Содержит информацию обо всех хостах, которые имеются в симуляции. В качестве ключа словаря -- имя хоста, в качестве значения интерфейс типа HostInterface, который обобщает такие типы как $host$, $NetworkSwitch$ и $IOBalancer$.

\item \textit{vesninServers}
Поле типа $[]*Host$. Является списком, который содержит информацию о рабочих дисковых контроллерах, поддерживающих отношения с клиентом, представленных в виде указателя на $*Host$.

\item \textit{allVesninServers}
Поле типа $[]*Host$. Поле типа $[]*Host$. Является списком, который содержит информацию о обо всех (рабочих и нерабочих) дисковых контроллерах, поддерживающих отношения с клиентом, представленных в виде указателя на $*Host$.

\item \textit{storagesMap}   
Словарь типа $map[string]*Storage$. В данном контейнере хранится информация обо всех дисках, примонтированных к системе хранения данных. В качестве ключа словаря используется идентификатор конечного хранилища данных, а качестве значения -- указатель на дисковое хранилище.

\item \textit{linksMap}      
Словарь типа $map[string]*Link$. Контейнер, содержащий информацию обо всех сетях, представленных в данной симуляции.  В качестве ключа словаря используется идентификатор сети, а качестве значения -- сеть, по которой будет идти передача данных.

\item \textit{FunctionsMap} 
Словарь типа $map[string]func(*Process, []string)$. Данный контейнер хранит информацию обо всех функциях, которые будует запущены в качестве горутин в начальный момент времени (время запуска симуляции). Функции должны быть объявлены в файле deployment.xml.  В качестве ключа словаря используется идентификатор функции, представленный в строковом виде, а качестве значения -- указатель на функцию.

\item \textit{daemonList}  
Поле типа $[]*Process$. Является списком, который содержит информацию о горутинах, которые во время симуляции СХД, являются представлениями Unix-демонов и самостоятельно должны завершить своё исполнение.

\item \textit{pid} 
Поле типа $ProcessID$. Указатель на функцию, которая исполняется в текущий момент времени.

\item \textit{waitWorkerAmount} 
Поле типа $uint64$. Количество горутин, запущенных в текущий момент времени, завершения которых нужно ожидать для того, чтобы наполнить очередь актуальными текущими событиями. 

\item \textit{stepEnd}        
Поле типа $chan interface{}$. Является средством коммуникации горутин с главной ($master$) горутиной. В данный канал связи горутины, которые исполняются в текущий момент времени, сигнализируют о своём завершении.

\item \textit{nextWorkers}
Поле типа $[]*Process$. Является списком, который содержит информацию о горутинах, которые должны буть запущены на следующем шаге работы имитации системы со статусом $OK$.

\item \textit{timeOutWorkers}   
Поле типа $[]*Process$. Является списком, который содержит информацию о горутинах, которые должны буть запущены на следующем шаге работы имитации системы со статусом $TIMEOUT$.

\item \textit{anomalyWorkers}   
Поле типа $[]*Process$. Является списком, который содержит информацию о горутинах, которые должны буть запущены на следующем шаге работы имитации системы со статусом $FAIL$.

\item \textit{logsMap}  
Словарь типа $map[string]float64$. Данный контейнер хранит информацию, которая впоследствии будет выведена в виде логов системы.  В качестве ключа словаря используется идентификатор наблюдаемого значения, а качестве значения -- числовая характеристика данной величины.

\item \textit{unitsMap} 
Словарь типа $map[string]float64$. Данный контейнер хранит информацию о единицах системы измерений, принятых в данной симуляции. В качестве ключа словаря используется идентификатор единицы измерения, а качестве значения -- численная характерстика относительно эталона.

\item \textit{backupRoutesMap} 
Словарь типа  $map[Route]*Link$. Содержит значения обо всех запасных (backup) путях, возможной в данной конфигурации компьютерной сети. $Route$ -- структура, имеющая в качестве своих полей $start$ и $finish$ -- указатели на хост, которые являются началом и концом пути, соответственно. Значение $*Link$ -- является указателем на сеть, по которой будет проходить передача пакетов в обе стороны.

\item \textit{HostLinksMap}
Словарь типа $map[HostInterface][]*Link$. Данный контейнер хранит информацию о сетях, к которым имеет доступ каждый хост. В качестве ключа словаря используется идентификатор хоста, а качестве значения -- список, состоящий из указателей на сеть, принадлежащих даннному хосту.

\item \textit{LinkBackupsMap}  
Словарь типа $map[*Link]*Link$.  В качестве ключа словаря используется идентификатор конечного хранилища данных, а качестве значения -- указатель на дисковое хранилище.
\end{itemize}

\begin{figure}[t!]
	\centering
	\includegraphics[width=\textwidth]{Kenenbek/global_queue.png}
	\caption{Глобальная очередь в симуляции}
	\label{fig:globalqueue}
\end{figure}

\subsubsection{Функции Environment}
\par 
Дискретно-событийная симуляция моделирует работу системы как дискретную последовательность событий во времени. Каждое событие происходит в определенный момент времени и отмечает изменение состояния в системе. Между последовательными событиями никаких изменений в системе не предполагается; таким образом, симуляция может непосредственно переходить во времени от одного события к другому. Схема данного действия изображена на рис. ~\ref{fig:loop}.

\begin{figure}[!ht]
	\centering
	\includegraphics[width=\textwidth]{Kenenbek/images/loop.png}
	\caption{Один цикл симуляции}
	\label{fig:loop}
\end{figure}  

\textbf{func NewEnvironment() *Environment}
Входные аргументы: отсутствуют.
Выходное значение: переменная типа *Environment.
Описание функции:Создаёт и инициализует необходимые поля для функцирования симуляции, такие как:
\begin{itemize}
	\item 		queue           
	\item 		workers        
	\item 		SendEventsNameMap 
	\item 		ReceiveEventsNameMap
	\item 		ReceiverSendersMap
	\item 		stepEnd
	\item 		logsMap
	\item 		HostLinksMap
	\item 		LinkBackupsMap
\end{itemize}

\textbf{func createUnits()}

Входные аргументы: отсутствуют.

Выходное значение: отсутствует.

Описание функции: Инциализирует единицы измерения необходимые при симуляции системы (показано в таблице ~\ref{tab:SI}\ref{tab:SI}{tab:SI}).
\begin{table}[]
	\centering
	\caption{Единицы системы измерений при моделировании}
	\label{tab:SI}
	\begin{tabularx}{\textwidth}{|X|X|}
		TB   & $1000^4$ byte         \\
		GB   & $1000^3$              \\
		MB   & $1000^2$              \\
		KB   & $1000$                \\
		B    & $1$                   \\
		GBps & $1000^3$ byte per sec \\
		MBps & $1000^2$ byte per sec \\
		KBps & $1000$ byte per sec   \\
		Bps  & $1$ byte per sec      \\
		Gf   & $1000^3$ flops        \\
		Mf   & $1000^2$ flops        \\
		Kf   & $1000$ flops          \\
		f    & $1$ flops            
	\end{tabularx}
\end{table}

\textbf{func (env *Environment) stopSimulation(EventInterface)}

Входные аргументы: указатель на объект типа *Environment.

Выходное значение: отсутствует.

Описание: Даннная функция останавливает исполнение программы путем выставления флага shouldStop в положительное значение. Это означает, что на следующем этапе 

\textbf{func (env *Environment) updateQueue(deltaTime float64) }

Входные аргументы: 
\begin{itemize}
	\item указатель на объект типа *Environment.
\end{itemize}
Выходное значение: отсутствует.

Описание: Даннная функция обновляет очередь событий за время $deltaTime$. 

\textbf{func (env *Environment) CreateTransferEvents()}

Входные аргументы: 
\begin{itemize}
	\item \textit{env}указатель на объект типа *Environment.
\end{itemize}
Выходное значение: отсутствует.

Описание: Даннная функция создаёт события, которые имитируют передачу данных от одного хоста к другому.

\textbf{func (env *Environment) Step() EventInterface }

Входные аргументы: 
\begin{itemize}
	\item \textit{env} -- указатель на объект типа *Environment.
\end{itemize}

Выходное значение: текущее событие симуляции.

Описание: Даннная функция осуществляет шаг симуляции, который состоит из следующих шагов. 
\begin{enumerate}
	\item Cоздать события, которые имитируют передачу данных от одного хоста к другому;
	\item Проверить является ли этот шаг симуляции последним;
	\item Проверить симуляцию на возникновение дедлоков;
	\item Получить событие из очереди с минимальным значением времени;
	\item Обновить текущее время;
	\item Обновить очередь событий за время, прошедшее с времени прошлого события;
	\item Обработать коллбэки (callbaks) текущего события;
	\item Проверить является ли этот шаг симуляции последним.
	
\end{enumerate}

\textbf{func (env *Environment) FindNextWorkers(event EventInterface)}
Входные аргументы:
\begin{itemize}
	\item \textit{env} -- указатель на объект типа *Environment;
	\item \textit{event} -- текущее событие. Объект типа EventInterface;
\end{itemize}

Выходное значение: отсутствует. 

Описание: Даннная функция занимается поиском горутин, которые должны начать исполнение после выполнения текущего шага. Данный список включает в себе также горутины, которые начнут исполнение со статусами $OK$, $FAIL$, $TIMEOUT$.

\textbf{func (env *Environment) SendStartToSignalWorkers()}

Входные аргументы: указатель на объект типа *Environment.
\begin{itemize}
	\item \textit{env} -- указатель на объект типа *Environment;
\end{itemize}
Выходное значение: отсутствует. 

Описание: Даннная функция рассылает сигналы через каналы коммуикации горутинам, которые должны начать исполнение после выполнения текущего шага. Данный список включает в себе также горутины, которые начнут исполнение со статусами $OK$, $FAIL$, $TIMEOUT$.

\textbf{func (env *Environment) WaitWorkers() }
Входные аргументы:
\begin{itemize}
	\item \textit{env} -- указатель на объект типа *Environment;
\end{itemize}

Выходное значение: отсутствует. 

Описание: Даннная функция дожидается выполнения задач текущими горутинами (goroutine), которым были посланы сигналы на предыдущем этапе.



\subsection{Описание примитивов, использованных при имитации системы}	

\subsubsection{Имитация сети}
\par 
Компьютерная сеть или сеть передачи данных - это цифровая телекоммуникационная сеть, которая позволяет узлам совместно использовать ресурсы. В компьютерных сетях вычислительные устройства обмениваются данными друг с другом с использованием соединений между узлами (линией передачи данных). Эти линии передачи данных устанавливаются на кабельных носителях, таких как провода или оптические кабели.

\begin{figure}[t!]
	\centering
	\includegraphics[width=\textwidth]{Kenenbek/link_queue.png}
	\caption{Очередь у сети}
	\label{fig:linkqueue}
\end{figure}

Сетевые компьютерные устройства, которые создают, маршрутизируют и завершают данные, называются сетевыми узлами. Узлы могут включать хосты, PCIe-фабрику, а также сетевое оборудование. Можно сказать, что два таких устройства объединены в сеть, когда одно устройство может обмениваться информацией с другим устройством, независимо от того, имеет ли оно прямое соединение друг с другом.

Сеть имитируется при помощи структуры $Link$. Она обладает следующими полями (характеристиками). 
\begin{itemize}
	\item  \textit{name} -- идентификатор сети в текстовом представлении типа string. 
	\item \textit{state} -- cтепень соответсвия изначальному ресурсу, либо 1 минус деградация данной сети. Значение типа float64, может принимать значения от 0 до 1, где 0 соответсвует полной деградации сети, а 1 -- "фабричному" состоянию. Поле типа float64. 

	\item \textit{route} -- указатель на структуру данных Route, которая содержит информацию о хостах, которые соединяет данная сеть. . Поле типа *Route.

	\item \textit{minEvent} -- указатель на минимальное событие-пакет *TransferEvent, которое передаётся в текущий момент по сети. 

	\item \textit{bandwidth} -- пропускная способность сети, которая изменяется в байтах в секунду. Переменная типа float64. 

	\item \textit{lastTimeRequest} -- время последнего обращения к данной сети. Переменная типа float64.

	\item \textit{mutex} -- примитив синхронизации типа sync.Mutex необходимой для корректности парального доступа к полям структуры данной сети.

	\item \textbf{counter} -- количество пакетов, которые передаются в текущий момент времени по сети. Переменная типа int64.

\end{itemize}

\textbf{func NewLink(bandwidth float64, name string) *Link}

Входные аргументы:
\begin{itemize}
 \item bandwidth -- переменная типа float64. Содержит информацию о пропускной способности сети;
 \item name -- переменная типа string, имя сети. 
\end{itemize}
Выходное значение: Указатель созданную структуру, которая инкапсулирует сеть. 

Описание функции: Создаёт указатель созданную структуру, которая инкапсулирует сеть с именем name и пропускной способностью bandwidth и инициализирует необходимые поля сети, такие как:

\begin{itemize}
	\item bandwidth 
	\item mutex    
	\item name   
	\item state  
\end{itemize}

\textbf{func (link *Link) Put(event *TransferEvent)}

Входные аргументы:
\begin{itemize}
	\item  link -- указатель на структуру *Link;
	\item event -- указатель на событие, которое должно передаваться по сети.
\end{itemize}
Выходное значение: отсутствует.

Описание функции: Данная функция добавляет событие в очередь событий, относящейся к сети $link$. 


\textbf{func (link *Link) EstimateTimeEnd(e *SendEvent)}

Входные аргументы: указатель на событие SendEvent, которое должно передаваться по сети.
\begin{itemize}
	\item \textit{link} -- указатель на структуру $Link$; 
\end{itemize}
Выходное значение: отсутствует

Описание функции: Оценить время окончания  $t_{end}$ передачи события-пакета по данной сети по следующей формуле:

\[ t_{end} = t_0 + \dfrac{S}{\dfrac{B}{n}  \cdot q }  \], 

где $t_0$ -- это текущее время, \(S\) -- размер передаваемого пакета,  \(B\) -- пропускная способность сети, \(n\) -- количество пакетов, которые передаются в текущий момент времени,  \(q\) -- степень деградации сети. 


\textbf{func (env *Environment) FindNextTransferEvent()}
Входные аргументы: 
\begin{itemize}
	\item \textit{env} -- указатель на структуру *Environment.
\end{itemize}

Выходное значение: Отсутствует. 

Описание функции: Данная функция "составляет" события, которые будут передаваться в текущий момент времени.  


\textbf{func GetRoute(route Route) *Link}

Входные аргументы: 
\begin{itemize}
	\item route переменна типа Route, содержащая информацию об начальном и конечном хостах.
\end{itemize}
Выходное значение: Указатель на структуру Link. 

Описание функции: Данная функция по имени route возвращает указатель на структуру Link.


\textbf{Route} обладает следующими полями.

Указатель на начальный	start. Тип  HostInterface

Указатель на конечный finish. Тип HostInterface

\subsubsection{Имитация хоста}

\par 
Сетевой хост - это компьютер или другое устройство, подключенное к компьютерной сети. Сетевой хост может предоставлять информационные ресурсы, службы и приложения пользователям или другим узлам в сети. Сетевой узел - это сетевой узел, которому назначен сетевой адрес.
Компьютеры, участвующие в сетях, которые используют пакет интернет-протокола, также могут называться IP-узлами. В частности, компьютеры, участвующие в Интернете, называются интернет-хостами, иногда интернет-узлами. Интернет-хосты и другие IP-хосты имеют один или несколько IP-адресов, назначенных их сетевым интерфейсам. Адреса настраиваются либо вручную администратором, либо автоматически. В общем случае, все серверы - это хосты, но не все хосты - это серверы. Любое устройство, установившее соединение с сетью, квалифицируется как хост, тогда как только хосты, которые принимают подключения от других устройств (клиентов), квалифицируются как серверы.

\begin{figure}[t!]
	\centering
	\includegraphics[width=\textwidth]{Kenenbek/host_queue.png}
	\caption{Формирование очереди}
	\label{fig:hostqueue}
\end{figure}

\begin{itemize}
	
	\item \textit{name} является идентификатором объекта. Поле типа string.  

	\item \textit{typeId} содержит информацию о классе устройств, которым принадлежит данный хост. Поле типа string. 

\item \textit{processes} Содержит информацию в виде списка указателей на Process обо всех текущих процессах, запущенных на данном хосте. Поле типа []*Process. 

\item \textit{speed} скорость работу данного хоста, измеряемая в flops. Поле типа float64. 

\item \textit{storage} содержит указатель на диск, который примонтирован к данному хосту. Поле типа *Storage.

\item \textit{traffic} -- трафик в байт/с, который проходит через данный хост. Поле типа float64.

	\item \textit{logs} -- текстовове представление логов данного хоста. Поле типа interface\{\}.

\end{itemize}
\textbf{Функции необходимые для имитации хоста}

\textbf{func (env *Environment) getHostByName(name string) HostInterface}

Входные аргументы: 
\begin{itemize}
	\item \textit{name} -- аргумент name типа string. Содержит имя хоста.
\end{itemize}
Выходное значение: Объект типа HostInterface.

Описание функции: Данная функция по данному имени name возвращает объект типа HostInterface.


\textbf{func (process *Process) GetHost() HostInterface }

Входные аргументы: Указатель на процесс, владеющий в данное 
\begin{itemize}
	\item \textit{process} -- указатель на процесс, владеющий в данное время исполнением.
\end{itemize}
Выходное значение: Объект типа HostInterface

Описание функции: Данная функция возвращает хост HostInterface, на котором в данное время исполняется текуща горутина. 

\textbf{func (host *Host) GetName() string }

Входные аргументы:
\begin{itemize}
	\item \textit{host} -- указатель на объект Host;
\end{itemize}
Выходное значение: Идентификатор хоста тип string.

Описание функции: Данная функция возвращает имя текущего хоста.


\textbf{func (host *Host) GetType() string }

Входные аргументы: 
\begin{itemize}
	\item \textit{host} -- указатель на объект Host;
\end{itemize}
Выходное значение: Тип класса устройств к которым относится данный хост. Текстовое представление.

Описание функции: Данная функция возвращает тип текущего хоста.


\textbf{func (host *Host) GetDevTemp() float64 }

Входные аргументы: 
\begin{itemize}
	\item \textit{host} -- указатель на объект Host;
\end{itemize}

Выходное значение: Температура данного хоста. Тип float64.

Описание функции: Данная функция возвращает температуру данного хоста в текущий момент времени.


\textbf{func (host *Host) GetTraffic() float64}

Входные аргументы:
\begin{itemize}
	\item \textit{host} -- указатель на объект Host;
\end{itemize}

Выходное значение: Суммарный (входной и выходной) траффик, проходящий, через данный хост. 

Описание функции: Данная функция возвращает значение суммарного (входного и выходного) траффика, проходящего, через данный хост.


\textbf{func (host *Host) AddTraffic(traffic float64)}

Входные аргументы:
\begin{itemize}
	\item \textit{host} -- указатель на объект Host;
\end{itemize}
Выходное значение: Отсутствует.

Описание функции: Данная функция кумулятивно увеличивает суммарное значение выходного траффика на значение traffic. 


\textbf{func (host *Host) GetLoad() int }

Входные аргументы:
\begin{itemize}
	\item \textit{host} -- указатель на объект Host;
\end{itemize}

Выходное значение: Загрузка процессора в текущий момент времени.

Описание функции: Данная функция возвращает загрузку процессора в текущий момент времени.


\textbf{func (host *Host) GetLogs() interface}

Входные аргументы: 
\begin{itemize}
	\item \textit{host} -- указатель на объект Host;
\end{itemize}
Выходное значение: Логи компоненты системы. 

Описание функции: Данная функция возвращает логи компоненты системы. 


\textbf{func (host *Host) SetLogs(logs interface)}

Входные аргументы:
\begin{itemize}
	\item \textit{host} -- указатель на объект Host;
\end{itemize}
Выходное значение: Отсутствует.

Описание функции: Обновляет логи текущей компоненты системы. 


\textbf{func (host *Host) GetStorage() *Storage }

Входные аргументы:
\begin{itemize}
	\item \textit{host} -- указатель на объект Host;
\end{itemize}
Выходное значение: Указатель на объект Storage, объект симулирующий конечный дисковый носитель.

Описание функции: Данная функция возвращает указатель на объект Storage, объект симулирующий конечный дисковый носитель.


\textbf{func GetHostByName(hostName string) HostInterface }

Входные аргументы: 
\begin{itemize}
	\item \textit{hostName}-- имя запрашиваемого хоста. 
\end{itemize}
Выходное значение: Указатель на объект Host.

Описание функции: Данная функция возвращает указатель на объект Host по его строковому указателю.

\subsubsection{Имитация конечного дискового хранилища}
\begin{figure}[t!]
	\centering
	\includegraphics[width=\textwidth]{Kenenbek/hdd_queue.png}
	\caption{Очередь событий у конечного дисквого носителя}
	\label{fig:hdd_queue}
\end{figure}

Структура $StorageType$ обладает следующими полями:

\begin{itemize}
	
	\item \textit{StorageType} -- cтруктура данных StorageType необходима при модировании класса конечных дисковых носителей. Данная структура обладает следующими полями:

	\item \textit{	typeId} -- идентификатор класса, к которому принадлежит данный тип конечных дисковых носителей. Тип    string. 
	\item \textit{	writeRate} -- скорость данных на запись конечного дискового носителя. Тип float64. 
	\item \textit{	readRate } -- скорость данных на чтение конечного дискового носителя. Тип float64. 
	\item \textit{	size     } -- размер конечного дискового носителя. Тип float64. 
\end{itemize}

Конкретная реализация конечного дискового носителя осуществляется при помощи примитива Storage. Он обладает следующими полями: 

\begin{itemize}
	\item \textit{	*StorageType} -- указатель на класс устройств конечного дискового носителя.  

	\item \textit{	name     } -- идентификатор конечного дискового носителя.

	\item \textit{	readLink } -- указатель структуры, по которой происходит запись на  конечный дисковый носитель. Тип $*Link$. 

	\item \textit{	writeLink }. Тип *Link. Указатель структуры, по которой происходит чтение на  конечный дисковый носитель.

	\item \textit{	usedSize }. Тип int64. Занятое место на конечном дисковом носителе.

	\item \textit{	logs }. Тип interface{}. Логи, принадлежащие конечному дисковому носителю.
\end{itemize}

\textbf{func NewStorage(storageType *StorageType, name string) *Storage}

Входные аргументы:
\begin{itemize}
	\item \textit{storageType} -- тип конечного носителя; 
	\item \textit{name} --  имя создаваемого объекта.
\end{itemize}
Выходное значение: Указатель на объект Storage. 

Описание функции: Данная функция создаёт объект, имитирующий поведение конечного диского носителя.

\textbf{func GetDiskDrives() map[string]*Storage}

Входные аргументы: отсутствуют.

Выходное значение: Словарь, где в качестве ключа используется строка, а качестве значения конечный дисковый носитель, имеющий такое же имя.

Описание функции: Данная функция возвращет словарь, содержащий сведения обо всех дисковых носителях, имеющихся в конкретной реализации. 

\textbf{func (storage *Storage) GetLogs() interface{}}

Входные аргументы: Указатель на структуру, имитирующую конечный дисковый накопитель.

Выходное значение: Логи дискового компонента. 

Описание функции: Данная функция возвращает логи дисковой компоненты. 

\textbf{func (storage *Storage) SetLogs(logs interface{})}

Входные аргументы:
\begin{itemize}
	\item \textit{storage} -- указатель на структуру, имитирующую конечный дисковый накопитель.
\end{itemize}
Выходное значение:  Отсутствует.

Описание функции: Данная функция обновляет логи дисковой компоненты. 

\textbf{func (storage *Storage) GetName() string}

Входные аргументы: 
\begin{itemize}
	\item \textit{storage} -- указатель на структуру, имитирующую конечный дисковый накопитель.
\end{itemize}

Выходное значение: Имя конечного дискового накопителя.

Описание функции: Данная функция имя конечного дискового накопителя.

\textbf{func (storage *Storage) GetDevTemp() float64}

Входные аргументы: 
\begin{itemize}
	\item \textit{storage} -- указатель на структуру, имитирующую конечный дисковый накопитель.
\end{itemize}

Выходное значение: Температура конечного дискового накопителя.

Описание функции: Данная функция возвращает температуру конечного дискового накопителя.

\textbf{func (storage *Storage) GetRawCapacity() float64}

Входные аргументы: 
\begin{itemize}
	\item \textit{storage} -- указатель на структуру, имитирующую конечный дисковый накопитель.
\end{itemize}

Выходное значение: Заявленная ёмкость конечного дискового накопителя.

Описание функции: Данная функция возвращает ёмкость конечного дискового накопителя.

\textbf{func (storage *Storage) GetAvgReadSpeed() float64}

Входные аргументы: 
\begin{itemize}
	\item \textit{storage} -- указатель на структуру, имитирующую конечный дисковый накопитель.
\end{itemize}

Выходное значение: Средняя скорость на чтение конечного дискового накопителя.

Описание функции: Данная функция возвращает средную скорость на чтение конечного дискового накопителя.

\textbf{func (storage *Storage) GetAvgWriteSpeed() float64}

Входные аргументы: 
\begin{itemize}
	\item \textit{storage} -- указатель на структуру, имитирующую конечный дисковый накопитель.
\end{itemize}

Выходное значение: Средняя скорость на запись конечного дискового накопителя.

Описание функции: Данная функция возвращает средную скорость на запись конечного дискового накопителя.


\textbf{func (storage *Storage) GetDataInterfaceCNT() uint16}

Входные аргументы: 
\begin{itemize}
	\item \textit{storage} -- указатель на структуру, имитирующую конечный дисковый накопитель.
\end{itemize}

Выходное значение: Интерфейс передачи данных. 

Описание функции: Данная функция возвращает интерфейс передачи данных.

\textbf{func (storage *Storage) GetUsedSpace() float64 }

Входные аргументы: 
\begin{itemize}
	\item \textit{storage} -- указатель на структуру, имитирующую конечный дисковый накопитель.
\end{itemize}

Выходное значение:  Размер занятого места на конечном дисковом накопителе.

Описание функции: Данная функция возвращает размер занятого места на конечном дисковом накопителе.

\textbf{func (storage *Storage) GetFreeSpace() float64}

Входные аргументы: 
\begin{itemize}
	\item \textit{storage} -- указатель на структуру, имитирующую конечный дисковый накопитель.
\end{itemize}

Выходное значение: Размер свободного места на конечном дисковом накопителе.

Описание функции: Данная функция возвращает размер свободного места на конечном дисковом накопителе.

\textbf{func (storage *Storage) WritePacketSize() }

Входные аргументы: 
\begin{itemize}
	\item \textit{storage} -- указатель на структуру, имитирующую конечный дисковый накопитель.
\end{itemize}

Выходное значение: Отсутствует.

Описание функции: Данная функция имитирует запись на конечный дисковый накопитель одного пакета данных.

\textbf{func (storage *Storage) DeletePacketSize()}

Входные аргументы: 
\begin{itemize}
	\item \textit{storage} -- указатель на структуру, имитирующую конечный дисковый накопитель.
\end{itemize}

Выходное значение: Отсутствует.

Описание функции: Данная функция имитирует удаление с конечного дискового накопителя одного пакета данных.

\subsubsection{Имитация коммутатора внутренней управляющей сети СХД}

\textbf{NetworkSwitch}
Структура данных NetworkSwitch необходима при моделировании коммутатора внутренней управляющей сети СХД. Данная структура обладает следующими функциями:

\textbf{func(ns *NetworkSwitch) GetConnectedDevCnt() uint8}

Входные аргументы: Указатель на структуру, имитирующую коммутатор внутренней управляющей сети СХД.
\begin{itemize}
	\item \textit{ns} -- указатель на структуру, имитирующую коммутатор внутренней управляющей сети СХД.
\end{itemize}

Выходное значение: Количество подключенных устройств.

Описание функции: Данная функция возвращает количество подключенных устройств.

\textbf{func(ns *NetworkSwitch) GetOnlineSwitchesCnt() uint8}

Входные аргументы:
\begin{itemize}
	\item \textit{ns} -- указатель на структуру, имитирующую коммутатор внутренней управляющей сети СХД.
\end{itemize}

Выходное значение: Количество одновременно включенных коммутаторов.

Описание функции: Данная функция возвращает количество одновременно включенных коммутаторов.

\subsubsection{Имитация фабрики PCI Express}

\textbf{PCIeFabric}
Структура данных PCIeFabric необходима при моделировании фабрики PCI Express. Данная структура обладает следующими функциями:

\textbf{func(pc *PCIeFabric) GetPCIeDevicesCnt() uint16}

Входные аргументы:
\begin{itemize}
	\item \textit{pc} -- указатель на структуру, имитирующую фабрику PCIe Express.
\end{itemize}

Выходное значение: Количество подключенных устройств.

Описание функции: Данная функция возвращает количество подключенных устройств.


\textbf{func(pc *PCIeFabric) GetPCIeMaxBandw() float64}

Входные аргументы: 
\begin{itemize}
	\item \textit{pc} -- указатель на структуру, имитирующую фабрику PCIe Express.
\end{itemize}

Выходное значение: Максимальная пропускная способность.

Описание функции: Данная функция возвращает значение максимальной пропускной способности.

\subsubsection{Имитация балансировщика нагрузки}
\textbf{IOBalancer}
Структура данных IOBalancer необходима при моделировании балансиров+щика нагрузки. Данная структура обладает следующими полями:
\begin{itemize}
	
	\item \textit{	*Host} -- является наследование от базового типа Host, т.е помимо нижеперечисленных полей, тип IOBalancer обладает также и полями типа Host. 
	\item \textit{	readResponseTime} -- объект типа float64. Время отклика на запросы чтения.
	\item \textit{	writeResponseTime}-- объект типа float64. Время отклика на запросы записи.
	\item \textit{	writeRequests} -- объект типа float64. Количество запросов на запись в единицу времени.
	\item \textit{	readRequests} -- объект типа  float64. Количество запросов на чтение в единицу времени.
	\item \textit{	lastTime}-- объект типа float64. Время последнего запроса. 
\end{itemize}

\textbf{func(iob *IOBalancer) GetReadRequestsRate() float64}

Входные аргументы: 
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Количество обработанных запросов на чтение в секунду.

Описание функции: Данная функция возвращает количество обработанных запросов на чтение в секунду.

\textbf{func(iob *IOBalancer) GetWriteRequestsRate() float64}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Количество обработанных запросов на запись в секунду. 

Описание функции: Данная функция возвращает количество обработанных запросов на запись в секунду.

\textbf{func(iob *IOBalancer) GetReadResponseDelay() float64}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Время отклика при запросе на чтение. 

Описание функции: Данная функция возвращает значение времени отклика при запросе на чтение.

\textbf{func(iob *IOBalancer) GetWriteResponseDelay() float64}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Время отклика при запросе на запись.

Описание функции: Данная функция возвращает значение временпи отклика при запросе на запись.

\textbf{func(iob *IOBalancer) GetReadDataVolume() float64}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Объем передаваемых данных в режиме на чтение.

Описание функции: Данная функция возвращает объем передаваемых данных в режиме на чтение.

\textbf{func(iob *IOBalancer) GetWriteDataVolume() float64}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Объем передаваемых данных в режиме на запись. 

Описание функции: Данная функция возвращает объем передаваемых данных в режиме на запись.

\textbf{func(iob *IOBalancer) GetReadRequestProcessTime() float64}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}
Выходное значение: Среднее время обработки запросов на чтение.

Описание функции: Данная функция возвращает среднее значение времени обработки запросов на чтение.

\textbf{func(iob *IOBalancer) GetWriteRequestProcessTime() float64}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Среднее время обработки запросов на запись.

Описание функции: Данная функция возвращает возвращает среднее значение времени обработки запросов на запись.

\textbf{func(iob *IOBalancer) GetIoProcessingMethod() uint8}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Способ обработки операций ввода-вывода (синхронный/асинхронный).

Описание функции: Данная функция возвращает способ обработки операций ввода-вывода (синхронный/асинхронный).

\textbf{func(iob *IOBalancer) GetReadCancelRate() float64}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Количество аннулированных запросов на чтение в единицу времени.

Описание функции: Данная функция возвращает количество аннулированных запросов на чтение в единицу времени.

\textbf{func(iob *IOBalancer) GetWriteCancelRate() float64}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Количество аннулированных запросов на запись в единицу времени. 

Описание функции: Данная функция возвращает количество аннулированных запросов на запись в единицу времени.

\textbf{func(iob *IOBalancer) GetBlockSize() uint16}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}
Выходное значение:  Размер блока данных при чтении/записи.

Описание функции: Данная функция возвращает  размер блока данных при чтении/записи.

\textbf{func(iob *IOBalancer) GetIOProcessCnt() uint8}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Количество процессов, генерирующих запросы на чтение/запись.

Описание функции: Данная функция возвращает количество процессов, генерирующих запросы на чтение/запись.

\textbf{func(iob *IOBalancer) GetReadQueueLength() uint8}

Входные аргументы: 
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Длина очереди запросов на чтение для асинхронных операций ввода-вывода.

Описание функции: Данная функция возвращает длину очереди запросов на чтение для асинхронных операций ввода-вывода.

\textbf{func(iob *IOBalancer) GetWriteQueueLength() uint8}

Входные аргументы: Указатель на структуру, имитирующую балансировщик нагрузки.
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
\end{itemize}

Выходное значение: Длина очереди запросов на запись для асинхронных операций ввода-вывода. 

Описание функции: Данная функция возвращает длину очереди запросов на запись для асинхронных операций ввода-вывода.

\textbf{func(iob *IOBalancer) SetReadResponseDelay(rt float64}

Входные аргументы:
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
	\item \textit{rt} -- время отклика запросов на чтение. 
\end{itemize}

Выходное значение: Отсутствует. 

Описание функции: Данная функция устанавливает время отклика при запросах на чтение.

\textbf{func(iob *IOBalancer) SetWriteResponseDelay(rt float64}
Входные аргументы: 
\begin{itemize}
	\item \textit{iob} -- указатель на структуру, имитирующую балансировщик нагрузки. 
	\item \textit{rt} -- время отклика запросов на запись.
\end{itemize}

Выходное значение: Отсутствует.

Описание функции: Данная функция устанавливает время отклика при запросах на чтение.

\subsubsection{Имитация задач в симуляторе}
\textbf{Task}
Структура данных \textit{Task} необходима при моделировании задач в симуляторе. Данная структура обладает следующими полями, характеризующими  её:
\begin{itemize}
	\item \textit{	name} -- объект типа string. Идентификатор задачи.

	\item \textit{	size} -- объект типа float64. Размер задачи в байтах. Необходим в случае передачи данных по сети или сохранении задачи на диск.

	\item \textit{	flops} -- объект типа float64. Вычислительная сложность задачи во флопсах. Необходима для оценки времени, которое затратит хост при обработке данной задачи.

	\item \textit{	data} -- объект типа interface{}. Ссылка на дополнительную структуру данных, которыми может обладать данная задача. 

\end{itemize}

Соответственно, данный тип данных обладает следующим набором функций:

\textbf{func NewTask(name string, flops float64, size float64, data interface{}) *Task}

Входные аргументы:
\begin{itemize}
	\item \textit{name} -- объект типа string. Содержит имя задачи;
	\item \textit{flops} -- объект типа float64. Содержит вычислительный размер задачи; 
	\item \textit{size} -- объект типа float64. Содержит размер задачи;
	\item \textit{data} --  объект типа interface{}. Содержит ссылку на дополнительную структуру данных;
\end{itemize}

Выходное значение: Объект типа \textit{Task}.

Описание функции: Данная функция создаёт задачу с параметрами, указанными во входных аргументах.

\textbf{	func (task *Task) GetName() string }

Входные аргументы: Отсутствуют.

Выходное значение: Идентификатор задачи. 

Описание функции: Данная функция возвращает идентификатор задачи.

\textbf{	func (task *Task) GetSize() float64 }

Входные аргументы: Отсутствуют.

Выходное значение: Размер задачи.

Описание функции: Данная функция возвращает размер задачи.

\textbf{	func (task *Task) GetFlops() float64}

Входные аргументы: Отсутствуют.

Выходное значение: Вычислительный размер задачи.

Описание функции: Данная функция возвращает вычислительный размер задачи.

\textbf{	func (task *Task) GetData() interface{} }

Входные аргументы: Отсутствуют.

Выходное значение: Ссылка на дополнительную структуру данных, которыми может обладать данная задача.

Описание функции: Данная функция возвращает ссылка на дополнительную структуру данных, которыми может обладать данная задача.

\textbf{	func (process *Process) Execute(task *Task) }

Входные аргументы:
\begin{itemize}
	\item \textit{process} -- ссылка на текущий процесс, который будет заниматься обработкой задачи; 
	\item \textit{task} -- ссылка на задачу, которую необходимо обработать.
\end{itemize}

Выходное значение: Статус выполения задачи.

Описание функции: Данная функция имитирует поведение СХД при исполнении задачи.


Структура Process обладает следующими методами.

\textbf{func (pid *ProcessID) Next() uint64}

Входные аргументы: 
\begin{itemize}
	\item \textit{pid} -- указатель на структуру, которая симулирует процесс.
\end{itemize}

Выходное значение: Идентификатор объекта.

Описание функции: Данная функция генерирует новый уникальный идентификатор для процесса.

\textbf{func ProcWrapper(processStrategy func(*Process, []string), w *Process, args []string)}

Входные аргументы: 
\begin{itemize}
	\item \textit{processStrategy} -- указатель на структуру, которая симулирует процесс
	\item \textit{w} -- указатель на функцию, которая будет симулировать стратегию, которая реализовывается на реальном хосте;  
	\item \textit{args} -- набор аргументов, которым обладает хост.
\end{itemize}

Выходное значение: Процесс.

Описание функции: Данная функция по указанным входным параметрам создаёт и запускает процесс.


\textbf{func (process *Process) Daemonize() }

Входные аргументы: 
\begin{itemize}
	\item \textit{process} -- указатель на структуру, которая симулирует процесс.
\end{itemize}
Выходное значение: Отсутствует.

Описание функции: Данная функция превращает текущий процесс в процесс-демон.


\textbf{func (p *Process) GetData() interface}

Входные аргументы: Указатель на структуру, которая симулирует процесс.
\begin{itemize}
	\item 
\end{itemize}
Выходное значение: Указатель на структуру данных о дополнительных параметрах, которыми обладает хост.

Описание функции: Данная функция возвращает указатель на струку данных о дополнительных параметрах, которыми обладает хост.


\textbf{func (p *Process) GetName() string}

Входные аргументы: Указатель на структуру, которая симулирует процесс.

Выходное значение: Имя процесса.

Описание функции: Данная функция имя процесса.

\textbf{func (p *Process) GetEnv() *Environment}

Входные аргументы: Указатель на структуру, которая симулирует процесс.

Выходное значение: Объект, указывающий на окружение имитации.

Описание функции: Данная функция возвращает объект, указывающий на окружение имитации.

\subsubsection{Имитация процессов}
\par 
Процесс представляет собой экземпляр выполнения какой-либо логики последовательности действий в симуляции. Он содержит программный код и его текущую деятельность.
\begin{itemize}
	\item 
\end{itemize}

\textbf{Process}
Структура данных Process необходима при моделировании процессов в симуляторе. Данная структура обладает следующими полями, характеризующими  её:

\textbf{	pid}. Тип uint64. Идетификатор процесса. 

\textbf{	env}. Тип        *Environment. Ссылка на Environment, в котором осуществляется симуляция. 

\textbf{	resumeChan}. Тип chan STATUS. Канал по которому осуществляется взаимодействие главной горутины с данной горутиной. 

\textbf{	host}. Тип       HostInterface. Хост на котором существует данный процесс. 

\textbf{	name}. Тип         string. Имя данного процесса. 

\textbf{	noMoreEvents}. Тип bool. Булева переменная, которая выставляется в положительное значение, при завершение работы процесса.

\textbf{	data}. Тип         interface. Ссылка на  структуру, в  которой может содержаться дополнительная информация о данном процессе.

\textbf{	Done}. Тип chan struct. Канал по которому данный процесс сообщает мастерской горутине о своём завершении. 

\subsection{Устройство очереди}

Наиболее важным элементом при реализации моделирования сложных систем является поддержание консистентности очереди событий. В текущей версии библиотеки она реализована при помощи встроенного в язык программирования интерфейса "container/heap". Данный интерфейс представляет структуру данных под названием дерево, которое обладает свойством, что каждая его узел является минимальным значением в его поддереве. Эта структура данных была выбрана для моделирования, т.к является наиболее распространенной при реализации очереди событий с приоритетом, которым в случае моделирования событийных имитаций является время окончания события. 

Для имплементации данного интерфейса были реализованы следующие функции, которые показаны в таблице \ref{tab:queue}. 

\begin{table}[]
	\centering
	\caption{Функции необходимые для реализации на очереди}
	\label{tab:queue}
	\begin{tabularx}{\textwidth}{|X|X|X|X|}
		\hline
		Функция                                      & Входные аргументы                                                          & Выходные аргументы                              & Описание функции                                                                                                                                                                                                         \\ \hline
		func (eq eventQueue) Len() int               & -                                                                          & Длина очереди, тип int                          & Данная функция возвращает значение длины очереди.                                                                                                                                                                        \\ \hline
		func (eq eventQueue) Less(i, j int) bool     & Индексы элементов очереди. Тип int                                         & Тип bool                                        & Данная функция задаёт правило сравнения и  сравнивает элемент очереди с индексом i c элементом с индексом j. В случае, если первый элемент больше, то возвращается логическое да, в противном случает -- логическое нет. \\ \hline
		func (eq eventQueue) Swap(i, j int)          & Индексы элементов очереди. Тип int                                         & -                                               & Данная функция меняет местами элемент очереди с индексом i c элементов очереди с идексом j.                                                                                                                              \\ \hline
		func (eq *eventQueue) Push(e interface\{\})  & Значение, которое необходимо добавить в очередь. Тип interface\{\}         & -                                               & Данная функция добавляет новый элемент e в очередь событий.                                                                                                                                                              \\ \hline
		func (eq *eventQueue) Pop() interface\{\}    & -                                                                          & Минимальнй элемент в очереди. Тип interface\{\} & Данная функция извлекает минимальный элемент из очереди событий.                                                                                                                                                         \\ \hline
		func(eq *eventQueue) Fix(h Interface, i int) & h - элемент в очереди, который нуждается в изменениях. i - новый приоритет & -                                               & Данная функция меняет приоритет у элемента h в очереди событий на приоритет i.                                                                                                                                           \\ \hline
	\end{tabularx}
\end{table}
	



\subsubsection{Структура алгоритма с описанием функций составных частей}

\subsubsection{Преобразование входных данных}


\subsubsection{Моделирование сбоев}

\subsubsection{Преобразование выходных данных}

\subsubsection{Связь программы с другими программами}
ПрК ИмФ в ходе прогона имитации СХД каждый дискретный шаг времени, который может настраиваться, посылает сообщения в виде JSON-объектов подсистеме стохастической имитационной дискретно-событийная модели функционирования аппаратных компонентов системы хранения данных (ПИДС ФАК СХД).  Данный сервис по поступающим сообщениям, в которых содержится информация о состоянии имитации СХД в текущий момент времени, принимает решение о настройке внутренних параметров симулятора, таких как:

\begin{itemize}
	\item Сети
	\begin{itemize}
		\item Эффективная пропускная способность 
		\item Задержка сети
	\end{itemize}
	\item Процессоры
	\begin{itemize}
		\item Вычислительный ресурс
	\end{itemize} 
	\item Диски
	\begin{itemize}
		\item Скорость на чтение
		\item Скорость на запись
	\end{itemize} 

\end{itemize}


Кроме тюнинга параметров симулятора, ПИДС ФАК СХД также генерирует события, которые отвечают аномалиям у процессоров и сетей. Данные события отправляются в виде обратных сообщений ПрК ИмФ. Результаты работы симулятора сохраняются в подсистеме хранения данных (ПХД). Алгоритм предсказания сбоев (АПС СХД), взаимодействия с ПХД, получает данные симулятора для проведения корреляционного анализа, анализа временных рядов и построения искусственных нейронных сетей. Схема на рисунке ~\ref{fig:interaction} показывает взаимодействие вышеперечисленных компонент.

\begin{figure}[t!]
	\centering
	\includegraphics[width=\textwidth]{Kenenbek/inter.png}
	\caption{Схема взаимодействия ПрК ИмФ с другими программами}
	\label{fig:interaction}
\end{figure}


\subsection{ИСПОЛЬЗУЕМЫЕ ТЕХНИЧЕСКИЕ СРЕДСТВА}

Реализация алгоритмов и прогоны симуляции требуют для себя программных ресурсов. В связи с тем, что реализация алгоритмов ПрК ИмФ проводится в рамках двух логических этапов, а именно:

\begin{itemize}
	\item Дискретно-событийной модели
	\item Симуляции функционирования СХД
\end{itemize}

То для каждой из этих двух частей требуются разные необходимые ресурсы. Необходимые требования к аппаратному обеспечению для первого пункта приведены в таблице ~\ref{tab:req1}. Необходимые требования к аппаратному обеспечению приведены в таблице ~\ref{tab:req2}.

\begin{table}[h!]
	\begin{center}
		\begin{tabular}{ | l | l | l | l | l |l |l |l |l |}
			\hline
			Элемент & Минимальные требования & Рекомендуемые \\ \hline
			Процессор компьютера & 1 ядра & 2 ядер \\ \hline
			Видео карта компьютера & -- & -- \\ \hline
			Системная память & 2 ГБ &  4 ГБ \\ \hline
			Дисковая подсистема & 10 ГБ & 20 ГБ  \\ \hline
		\end{tabular}
	\end{center}
	\caption{Аппаратные требования для реализации дискретно-событийной модели АПС СХД.}
	\label{tab:req1}
\end{table}


\begin{table}[h!]
	\begin{center}
		\begin{tabular}{ | l | l | l | l | l |l |l |l |l |}
			\hline
			Элемент & Минимальные требования & Рекомендуемые \\ \hline
			Процессор компьютера & 2 ядра & 4 ядра \\ \hline
			Системная память & 8 ГБ &  16 ГБ \\ \hline
			Дисковая подсистема & 32 ГБ & 64 ГБ  \\ \hline
		\end{tabular}
	\end{center}
	\caption{Аппаратные требования для прогона компьютерной реализации ПрК ИмФ.}
	\label{tab:req2}
\end{table}

\subsection{ВЫЗОВ И ЗАГРУЗКА}

\subsubsection{Способ вызова программы с соответствующего носителя данных}

Для работы ПрК ИмФ необходим компилятор языка программирования Go, не ниже версии 1.10.  Для его установки нужно проделать следующие шаги:
\begin{itemize}
	\item Скачать архив бинарников с официального сайта https://golang.org/dl/
	\item Распаковать его при помощи команды в терминале \verb|tar -C /usr/local -xzf go$VERSION.$OS-$ARCH.tar.gz|
	\item Установить переменную среды \verb|export PATH=$PATH:/usr/local/go/bin|
	\item Запустить симуляцию \verb|go run main.go platform.xml deployment.xml|, где \verb|platform.xml| -- путь к файлу, который содержит информацию о топологии системы, а \verb|deployment.xml| -- о начальных 
	
\end{itemize}


\subsection{ВХОДНЫЕ ДАННЫЕ}
Входными данными ПрК ИмФ СХД должны являться:
\begin{itemize}
	
\item параметры имитации функционирования СХД;
\item входные данные АД СХД и АИмФ СХД;
\item параметры нагрузки на СХД;
\item массив управляющих воздействий на компоненты СХД.

\end{itemize}
\subsubsection{Характер, организация и предварительная подготовка входных данных}


\subsubsection{Формат, описание и способ кодирования входных данных}

Входные данные приходят на вход в виде таблицы для каждого компонента СХД и
СХД в целом.

\subsection{ВЫХОДНЫЕ ДАННЫЕ}

Программная реализация ПрК ИмФ СХД каждый дискретный промежуток времени сохраняет данные результатов работы алгоритма имитации функционирования СХД, что является одним из преимуществ симулятора. Данные содержат параметры компонент
СХД:

\begin{itemize}
	\item параметры контроллеров хранения:
	\begin{itemize}
		\item трафик контроллера хранения: в диапазоне от 0 до 5 ГБ/с;
		\item загрузка контроллера хранения: в диапазоне от 0 до 100 \%;
	\end{itemize}
	\item параметры носителей информации (НИ):
	\begin{itemize}
		\item тип (HDD, SSD);
		\item интерфейс передачи данных – PCI Express;
		\item емкость: в диапазоне от 0 до 12000 ГБ;
		\item свободное место на НИ: в диапазоне от 0 до 12000 ГБ;
		\item занятое место на НИ: в диапазоне от 0 до 12000 ГБ;
		\item средняя скорость чтения/записи: в диапазоне от 0 до 0,16 ГБ/с;
	\end{itemize}
	\item параметры фабрики PCI Express:
	\begin{itemize}
		\item количество подключенных устройств: в диапазоне от 12 до 2304 шт.;
		\item максимальная пропускная способность: в диапазоне от 0,25 ГБ/с до 15 ГБ/с;
	\end{itemize}
	\item параметры коммутатора внешней управляющей сети СХД:
	\begin{itemize}
		\item количество подключенных устройств: в диапазоне от 0 до 5 шт.;
		\item количество одновременно включенных коммутаторов: в диапазоне от 1 до 2 шт.;
	\end{itemize}
	\item параметры функционирования СПО СХД:
	\begin{itemize}
		\item объем передаваемых данных в режиме чтения/записи от 0 до 20 ТБ;
		\item количество запросов на чтение/запись в единицу времени: в диапазоне от 0 до 1 000 шт/с;
		\item время отклика на запросы чтения/записи: в диапазоне от 10 мс до 10 000 мс;
		\item время обработки запросов на чтение/запись: в диапазоне от 10 мс до 10 000 мс;
		\item способ обработки операций ввода-вывода: синхронный, асинхронный;
		\item количество аннулированных запросов на чтение/запись в единицу времени: в диапазоне от 0 до 1000 шт/с.
	\end{itemize}
	\item размер блока данных при чтении/записи: 4 КБ, 8 КБ, 16 КБ, 32 КБ, 64 КБ, 128 КБ, 256 КБ, 512 КБ, 1024 КБ, 1536 КБ, 2048 КБ;
	\item количество процессов, генерирующих запросы на чтение/запись, шт.: 1, 2, 4, 8, 16, 32, 64, 128, 160, 192;
	\item длина очереди запросов на чтение/запись для асинхронных операций ввода- вывода, шт.: 32, 64;
	\item состояния компонентов, в соответствии с ГОСТ 27.002–2015:
	\begin{itemize}
		\item работоспособное состояние;
		\item предотказное состояние (сбой);
		\item неработоспособное состояние (частичный отказ);
		\item предельное состояние (полный отказ).
	\end{itemize}
\end{itemize}


\subsubsection{Характер и организация выходных данных}

Программная реализация ПрК ИмФ возвращает на выходе JSON-объект, содержание переменные, отвечающие за состояние компонент СХД и всего СХД. К наблюдаемым компонентам относятся:
\begin{itemize}
	\item Контроллеры хранения, 4 шт.
	\item Носители информации, 12-2304 шт.
	\item Фабрика PCI Express, 1 шт.
	\item Коммутатора внешней управляющей сети СХД, 1 шт.
\end{itemize} 

\subsubsection{Формат, описание и способ кодирования выходных данных}

Выходные данные представляются для каждого компонента СХД и СХД в целом (включая характеристики среды) в виде  JSON-файла. Выбор данного формата был обусловлен простотой передачи объектов такого типа по сети. Элементы полей json-файла содержат численные значения наблюдаемых величин в заданный промежуток времени.

\textbf{output.json}

\lstinputlisting[language=Python]{Kenenbek/sample.json}


